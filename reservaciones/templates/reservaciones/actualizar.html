{% extends 'base.html' %}
{% load static %}
{% block title %}Actualizar Reservación{% endblock %}

{% block content %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="{% static 'reservaciones/css/gestion_admin.css' %}">

<div class="container">

    <div class="header-admin">
        <div class="d-flex align-items-center">
            <img src="{% static 'reservaciones/img/LOGO.png' %}" alt="Logo">
            <h2>Actualizar Reservación</h2>
        </div>

        <a href="{% url 'gestion_admin' %}" class="btn btn-regresar">
            <i class="bi bi-arrow-left-circle"></i> Regresar al menú
        </a>
    </div>

    <form method="POST" class="p-4 shadow-sm rounded-4">
        {% csrf_token %}
        <div class="row g-3">

            <div class="col-md-6">
                <label class="form-label fw-semibold text-secondary">Nombre del Cliente</label>
                <input type="text" name="nombreCliente" class="form-control"
                       value="{{ reservacion.nombreCliente }}"
                       pattern="[A-Za-zÁÉÍÓÚáéíóúÑñ ]+"
                       maxlength="100"
                       autocomplete="off"
                       title="El nombre solo puede contener letras y espacios." required>
            </div>

            <div class="col-md-6">
                <label class="form-label fw-semibold text-secondary">Teléfono</label>
                <input type="text" name="telefono" class="form-control"
                       value="{{ reservacion.telefono }}"
                       pattern="[0-9]{10}"
                       maxlength="10"
                       autocomplete="off"
                       oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 10)"
                       title="El teléfono debe tener exactamente 10 dígitos y solo números." required>
            </div>

            <div class="col-md-6">
                <label class="form-label fw-semibold text-secondary">Fecha del Evento</label>
                <input type="date" name="fechaEvento" class="form-control"
                       value="{{ reservacion.fechaEvento|date:'Y-m-d' }}"
                       title="Selecciona una fecha válida para el evento." required>
            </div>

            <div class="col-md-6">
                <label class="form-label fw-semibold text-secondary">Número de Invitados</label>
                <input type="number" name="numInvitados" class="form-control"
                       value="{{ reservacion.numInvitados }}"
                       min="1" max="50"
                       title="El número de invitados debe ser entre 1 y 50." required>
            </div>

            <div class="col-md-6">
                <label class="form-label fw-semibold text-secondary">Tipo de Evento</label>
                <select name="tipoEvento" class="form-select" required>
                    {% for evento in tipos_evento %}
                        <option value="{{ evento.id }}" {% if reservacion.tipoEvento.id == evento.id %}selected{% endif %}>
                            {{ evento.nombre }}
                        </option>
                    {% endfor %}
                </select>
            </div>

            <div class="col-md-6">
                <label class="form-label fw-semibold text-secondary">Estatus</label>
                <select name="estatus" class="form-select">
                    <option value="pendiente" {% if reservacion.estatus == "pendiente" %}selected{% endif %}>Pendiente</option>
                    <option value="confirmada" {% if reservacion.estatus == "confirmada" %}selected{% endif %}>Confirmada</option>
                    <option value="realizada" {% if reservacion.estatus == "realizada" %}selected{% endif %}>Realizada</option>
                </select>
            </div>
        </div>

        <div class="text-center mt-4">
            <button type="submit" class="btn btn-actualizar">
                <i class="bi bi-check-circle"></i> Guardar Cambios
            </button>
            <a href="{% url 'gestion_admin' %}" class="btn btn-regresar ms-2">
                <i class="bi bi-x-circle"></i> Cancelar
            </a>
        </div>
    </form>
</div>
{% endblock %}
